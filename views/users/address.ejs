<%- include('../userLayout/header.ejs')%>

    <%- include('../userLayout/head.ejs') %>
        <%- include('../userLayout/accountSidebar.ejs') %>

            <div class="col-lg-9">
                <% if(address.length> 0 ){%>
                <h2 class="checkout-title">User Address</h2><!-- End .checkout-title -->
                <%}%>
                <div class="row">
                    <div class="col-lg-12">
                        <!-- <div class="d-flex justify-content-end pb-2">
                                                            <a href="/insertAddress" type="button"
                                                                class="btn btn-outline-primary-2"> Add
                                                                Address</a>
                                                        </div> -->

                        <% if(address.length> 0 ){%>



                            <% address.forEach((value,index)=>{
                                %>

                                Name: <%= value.userName%> <br>
                                    Phone: <%= value.mobile%><br>
                                        Address: <%=value.houseName%><br>
                                            City: <%=value.city%><br>
                                                State: <%=value.state%><br>
                                                    PIN: <%= value.pincode%><br>
                                                        landmark: <%= value.landmark%>
                                                            <br>



                                                            <br>
                                                            <div style="display: flex;">

                                                                <input type="hidden" value="<%= index%>" name="index">
                                                                <!-- <div>
                                                                                                    <a class="btn  btn-outline-info circle arrow"
                                                                                                        href="/editAddress?id=&index=">Edit</a>





                                                                                                </div> -->
                                                                <div style="margin-left: 10px;">

                                                                    <a class="btn  btn-outline-danger circle arrow"
                                                                        onclick="deleteAddress('<%= value._id%>')">Delete</a>


                                                                </div>
                                                            </div>

                                                            <hr>

                                                            <% })%>


                                                                <%}else{%>
                                                                    <h1 class="alert alert-primary" role="alert">There is no address to show:</h1>
                                                                <%}%>

                    </div>
                </div>
            </div>
            </div><!-- End .col-lg-12 -->

            </div><!-- End .row -->
            </div><!-- End .container -->




            <script>
                function deleteAddress(id) {
                    Swal.fire({
                        title: "Are you sure?",
                        text: "You won't be able to revert this!",
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Yes, delete it!",
                        cancelButtonText: "Cancel",
                    }).then((result) => {
                        if (result.isConfirmed) {
                            $.ajax({
                                url: "/deleteAddress",
                                data: {

                                    id: id,
                                },
                                method: "post",
                                success: (response) => {
                                    if ((response.remove = true)) {
                                        location.reload();
                                    }
                                },
                            });
                        }
                    });
                }
            </script>



            <%- include('../userLayout/accountfooter.ejs') %>

                <%- include('../userLayout/footer.ejs') %>